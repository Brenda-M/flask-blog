{% extends 'base.html' %}
{% import "bootstrap/wtf.html" as wtf %}

{% block content %}
<div class="container">
  <div class="col-sm-6 col-md-4">
    <div class="thumbnail">
      <img src="../static/images/blog_pictures/{{ post.image_file }}" alt="{{ post.title }}">
      <div class="caption">
        <h3>{{ post.title }}</h3>
        <p> {{ post.content }}</p>
        {% if post.author == current_user %}
        <div>
          <a href="{{ url_for('.update_post',  blogpost_id=post.id)}}"
            class="btn btn-secondary btn-sm mt-1 mb-1">Update</a>
          <button type="button" class="btn btn-danger btn-sm ml-1" data-toggle="modal"
            data-target="#deleteModal">Delete</button>
        </div>
        {% endif %}
      </div>
    </div>
  </div>
  {{ wtf.quick_form(form) }}
  <div class="comments">
    {% if comments %}
    {% for comment in comments %}
    <div class="card">
      <article class="media content-section">
        <div class="media-body">
          <div class="article-metadata">
            <a class="mr-2" href="#">{{ comment.author.username }}</a>
            <small class="text-muted">{{ comment.created_at.strftime('%Y/%m/%d')}}</small>
          </div>
          <p class="article-content">{{ comment.content }}</p>
          <button type="button" class="btn btn-danger btn-sm ml-1" data-toggle="modal"
            data-target="#deleteModal{{ comment.id }}">Delete</button>
        </div>
      </article>
    </div>

    
    {% endfor %}
    {% else %}
    <p> This post has no comments yet</p>
    {%endif%}
  </div>

  {% endblock content %}